version: 2.1

jobs:
  build:
    docker:
      - image: cimg/ruby:3.1.1
    steps:
      - checkout
      - add_ssh_keys:
          fingerprints:
          - "85:0b:63:a4:bc:6c:db:dc:2b:47:17:f9:e5:84:39:c5"
      - run: ruby --version
      - run: 
          name: install serverspec
          command:  |
            gem install serverspec;
            gem install yaml;
            gem install rake;
            gem install highline;
      - run:
          name: execute test
          command:  |
            cd serverspec;
            rake spec;

workflows:
  say-hello-workflow:
    jobs:
      - build
        
